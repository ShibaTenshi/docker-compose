pipeline {
     agent any

     stages {
          stage('Docker compose up') {
                      steps {
                          sh 'docker compose down'
                      }
          }
     }
     stage('Docker prune') {
                      steps {
                          sh 'docker system prune -a -f'
                      }
          }
     post {
        always {
            cleanWs(cleanWhenNotBuilt: false,
                                deleteDirs: true,
                                disableDeferredWipeout: true,
                                notFailBuild: true,
                                patterns: [[pattern: '.gitignore', type: 'INCLUDE'],
                                           [pattern: '.propsfile', type: 'EXCLUDE']])
        }
     }
}